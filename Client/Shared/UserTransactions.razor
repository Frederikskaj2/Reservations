@inherits FragmentNavigationBase
<div>
    @if (!Transactions?.Any() ?? false)
    {
        <Paragraph>Der er intet at vise.</Paragraph>
    }
    else
    {
        <Table>
            <TableHeader>
                <TableRow>
                    <TableHeaderCell>Dato</TableHeaderCell>
                    <TableHeaderCell>Tekst</TableHeaderCell>
                    <TableHeaderCell Class="text-right">Beløb</TableHeaderCell>
                    <TableHeaderCell Class="text-right">Saldo</TableHeaderCell>
                </TableRow>
            </TableHeader>
            <TableBody>
                @{
                    foreach (var transaction in Transactions!)
                    {
                        balance += transaction.Amount;
                        var localBalance = balance;
                        <TableRow Class="@(transaction.TransactionId == SelectedTransactionId ? "highlight" : "")">
                            <TableRowCell>
                                <a id="t-@transaction.TransactionId">@Formatter.FormatDate(transaction.Date)</a>
                            </TableRowCell>
                            <TableRowCell>
                                @if (transaction.Activity is Activity.PlaceOrder)
                                {
                                    <a href="@Urls.Orders/@transaction.OrderId">Oprettelse af bestilling @transaction.OrderId</a>
                                }
                                else if (transaction.Activity is Activity.UpdateOrder or Activity.SettleReservation)
                                {
                                    <a href="@Urls.Orders/@transaction.OrderId">@transaction.Description</a>
                                }
                                else if (transaction.Activity is Activity.PayIn)
                                {
                                    <text>Indbetaling</text>
                                }
                                else
                                {
                                    <text>Udbetaling</text>
                                }
                            </TableRowCell>
                            <TableRowCell class="text-right">@Formatter.FormatMoneyShort(transaction.Amount)</TableRowCell>
                            <TableRowCell class="text-right">@Formatter.FormatMoneyShort(localBalance)</TableRowCell>
                        </TableRow>
                    }
                }
            </TableBody>
            <TableFooter>
                <TableRow>
                    <TableRowCell ColumnSpan="4" Class="text-right">
                        <a id="total">
                            <strong>@Formatter.FormatMoneyShort(balance)</strong>
                        </a>
                    </TableRowCell>
                </TableRow>
            </TableFooter>
        </Table>
        <Paragraph>Alle beløb er i kr. En positiv saldo betyder at beboeren har penge til gode. En negativ saldo betyder at beboeren skylder penge.</Paragraph>
    }
</div>
